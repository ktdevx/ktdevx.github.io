---
title: WindowsにMinGWをインストールする
date: 2024-09-28T16:25:47+09:00
draft: false
tags:
  - MinGW
  - C
  - C++
params:
  toc: true
---

MinGWは、C/C++開発環境として無料で使用できるツールです。MinGW自体はほぼ開発終了していますが、後継のMinGW-w64は積極的に開発されています。

ここでは、MinGW-w64をWindowsにインストールする手順について解説します。

## MinGWをダウンロード

[公式サイトのダウンロードページ](https://www.mingw-w64.org/downloads/)にアクセスし、MinGWをダウンロードします。

ここからMinGW-W64-buildsをたどると、配布場所であるGitHubへのリンクがあるので、リンク先に飛びます。

7z形式で圧縮されて配布されているので好きなものをダウンロードしてください。配布ファイルについて詳細を記載したので参考にしてください。

### i686 / x86_64

アーキテクチャを示しています。i686が32bit用、x86_64が64bit用です。

### posix / win32 / mcf

スレッドの実装方法を示しています。

posixはposixスレッドを使用しています。こちらはwin32と比較して速度が遅いようです。

win32はWin32 APIが提供するスレッド機能を使用しています。しかし、win32はC++11のthreadに対応していないようです。

mcfはposixとwin32のいいとこどりです。高速でC++11のthreadにも対応しています。

既存プロジェクトをビルドする場合は、そのプロジェクトの指定に従ってください。

### msvcrt / ucrt

ランタイムライブラリを示しています。

msvcrtは、古いバージョンのMicrosoft Visual C++のランタイムライブラリです。Windows XPやそれ以前とも互換性があります。

ucrtは、ユニバーサルCランタイムで、Windows10以降のバージョンでは標準として使用されています。

これから新しく設計を始める場合はucrtを、古いWindowsシステムとの互換性が必要な場合はmsvcrtを選択することを推奨します。

## MinGWをインストール

圧縮ファイルがダウンロードできたら任意の場所に展開してください。全てASCII文字、かつ空白を含まないパスに配置するのが無難です。

展開してできたmingw64/binフォルダにgccやg++などのビルドツールが含まれています。

## binフォルダにパスを通す

このままではパスが通っていないので、コマンドプロンプトでgccと打っても反応しません。

そのため、環境変数のPathに先ほどのbinフォルダまでのパスを通してあげます。これにより、コマンドプロンプトからgccと打つと動作するようになります。

実行するとパスを通すスクリプトを作成してもよいかもしれません。

## C言語のソースコードをコンパイルする

動作確認用に、main.cというファイル名で適当なC言語のソースコードを作成してみます。

今回は実行すると"Hello, World!"と表示されるプログラムを作成しました。

```c
#include <stdio.h>

int main(void)
{
    printf("Hello, World!\n");
    return 0;
}
```

コマンドプロンプトで`gcc main.c`を実行すると、a.exeという名前で実行ファイルが作成されます。

これをコマンドプロンプトから実行し、"Hello, World!"と表示されればOKです。
